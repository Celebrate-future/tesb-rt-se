<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

	<reference id="CRMServiceClient" interface="org.talend.services.crmservice.CRMService" />

	<reference id="ReservationServiceClient"
		interface="org.talend.services.reservationservice.ReservationService" />

	<bean id="CarSearchModel" class="org.talend.esb.client.model.CarSearchImpl">
		<property name="crms" ref="CRMServiceClient" />
		<property name="reserve" ref="ReservationServiceClient" />
	</bean>

	<bean id="CarReserveModel" class="org.talend.esb.client.model.CarReserveImpl">
		<property name="reserve" ref="ReservationServiceClient" />
	</bean>

	<command-bundle xmlns="http://karaf.apache.org/xmlns/shell/v1.0.0">
		<command name="car/rent">
			<action class="org.talend.esb.client.commands.CarRent">
				<property name="searcher" ref="CarSearchModel" />
				<property name="reserver" ref="CarReserveModel" />
			</action>
		</command>
		<command name="car/search">
			<action class="org.talend.esb.client.commands.CarSearch">
				<property name="searcher" ref="CarSearchModel" />
			</action>
		</command>
		<command name="car/GUI">
			<action class="org.talend.esb.client.commands.CarGUI">
				<property name="searcher" ref="CarSearchModel" />
				<property name="reserver" ref="CarReserveModel" />
			</action>
		</command>
	</command-bundle>
</blueprint>