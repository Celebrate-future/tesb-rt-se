<!--

 Copyright (c) 2011 Talend Inc. - www.talend.com
 All rights reserved.

 This program and the accompanying materials are made available
 under the terms of the Apache License v2.0
 which accompanies this distribution, and is available at
 http://www.apache.org/licenses/LICENSE-2.0

 -->
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:cxf="http://cxf.apache.org/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:sec="http://cxf.apache.org/configuration/security"
  xmlns:http="http://cxf.apache.org/transports/http/configuration"
  xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"
  xmlns:jaxws="http://cxf.apache.org/jaxws"
  xsi:schemaLocation="
            http://cxf.apache.org/core
            http://cxf.apache.org/schemas/core.xsd
            http://cxf.apache.org/configuration/security
            http://cxf.apache.org/schemas/configuration/security.xsd
            http://cxf.apache.org/jaxws
            http://cxf.apache.org/schemas/jaxws.xsd
            http://cxf.apache.org/transports/http/configuration
            http://cxf.apache.org/schemas/configuration/http-conf.xsd
            http://cxf.apache.org/transports/http-jetty/configuration
            http://cxf.apache.org/schemas/configuration/http-jetty.xsd
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd">
			
	<import resource="classpath:META-INF/cxf/cxf.xml" />
	<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
	<import resource="classpath:META-INF/cxf/cxf-extension-http.xml" />
	<import resource="classpath:META-INF/cxf/osgi/cxf-extension-osgi.xml" />
	<import resource="classpath:META-INF/cxf/cxf-extension-policy.xml" />
	<import resource="classpath:META-INF/cxf/cxf-extension-addr.xml" />


	<bean id="CRMServiceBean"
		class="org.talend.services.crmservice.service.CRMServiceImpl"/>

	<!-- HTTP Endpoint -->
	<jaxws:endpoint id="CRMService"
		xmlns:serviceNamespace="http://services.talend.org/CRMService"
		serviceName="serviceNamespace:CRMServiceProvider"
		endpointName="serviceNamespace:CRMServiceProvider"
		implementor="#CRMServiceBean"
		address="/CRMServiceProvider"
		wsdlLocation="../examples/tesb/crmservice/common-sts/src/main/resources/model/CRMService.wsdl">
	      <jaxws:properties>
         <entry key="ws-security.signature.username" value="myservicekey"/>
		 <entry key="ws-security.callback-handler">
					<bean class="common.talend.CommonCallbackHandler"/>
		 </entry>
         <entry key="ws-security.signature.properties" value="META-INF/spring/serviceKeystore.properties"/>
         <entry key="ws-security.encryption.properties" value="META-INF/spring/serviceKeystore.properties"/>
      </jaxws:properties> 
   </jaxws:endpoint>


</beans>